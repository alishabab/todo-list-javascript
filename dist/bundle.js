!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){!function(t,n){var o={version:"2.11.2",areas:{},apis:{},inherit:function(e,t){for(var n in e)t.hasOwnProperty(n)||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n));return t},stringify:function(e){return void 0===e||"function"==typeof e?e+"":JSON.stringify(e)},parse:function(e,t){try{return JSON.parse(e,t||o.revive)}catch(t){return e}},fn:function(e,t){for(var n in o.storeAPI[e]=t,o.apis)o.apis[n][e]=t},get:function(e,t){return e.getItem(t)},set:function(e,t,n){e.setItem(t,n)},remove:function(e,t){e.removeItem(t)},key:function(e,t){return e.key(t)},length:function(e){return e.length},clear:function(e){e.clear()},Store:function(e,t,n){var r=o.inherit(o.storeAPI,(function(e,t,n){return 0===arguments.length?r.getAll():"function"==typeof t?r.transact(e,t,n):void 0!==t?r.set(e,t,n):"string"==typeof e||"number"==typeof e?r.get(e):"function"==typeof e?r.each(e):e?r.setAll(e,t):r.clear()}));r._id=e;try{t.setItem("_-bad-_","wolf"),r._area=t,t.removeItem("_-bad-_")}catch(e){}return r._area||(r._area=o.storage("fake")),r._ns=n||"",o.areas[e]||(o.areas[e]=r._area),o.apis[r._ns+r._id]||(o.apis[r._ns+r._id]=r),r},storeAPI:{area:function(e,t){var n=this[e];return n&&n.area||(n=o.Store(e,t,this._ns),this[e]||(this[e]=n)),n},namespace:function(e,t){if(!e)return this._ns?this._ns.substring(0,this._ns.length-1):"";var n=e,r=this[n];if(!(r&&r.namespace||(r=o.Store(this._id,this._area,this._ns+n+"."),this[n]||(this[n]=r),t)))for(var i in o.areas)r.area(i,o.areas[i]);return r},isFake:function(){return"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(e){return this._area.has?this._area.has(this._in(e)):!!(this._in(e)in this._area)},size:function(){return this.keys().length},each:function(e,t){for(var n=0,r=o.length(this._area);n<r;n++){var i=this._out(o.key(this._area,n));if(void 0!==i&&!1===e.call(this,i,this.get(i),t))break;r>o.length(this._area)&&(r--,n--)}return t||this},keys:function(e){return this.each((function(e,t,n){n.push(e)}),e||[])},get:function(e,t){var n,r=o.get(this._area,this._in(e));return"function"==typeof t&&(n=t,t=null),null!==r?o.parse(r,n):null!=t?t:r},getAll:function(e){return this.each((function(e,t,n){n[e]=t}),e||{})},transact:function(e,t,n){var o=this.get(e,n),r=t(o);return this.set(e,void 0===r?o:r),this},set:function(e,t,n){var r=this.get(e);return null!=r&&!1===n?t:o.set(this._area,this._in(e),o.stringify(t),n)||r},setAll:function(e,t){var n,o;for(var r in e)o=e[r],this.set(r,o,t)!==o&&(n=!0);return n},add:function(e,t){var n=this.get(e);if(n instanceof Array)t=n.concat(t);else if(null!==n){var r=typeof n;if(r===typeof t&&"object"===r){for(var i in t)n[i]=t[i];t=n}else t=n+t}return o.set(this._area,this._in(e),o.stringify(t)),t},remove:function(e,t){var n=this.get(e,t);return o.remove(this._area,this._in(e)),n},clear:function(){return this._ns?this.each((function(e){o.remove(this._area,this._in(e))}),1):o.clear(this._area),this},clearAll:function(){var e=this._area;for(var t in o.areas)o.areas.hasOwnProperty(t)&&(this._area=o.areas[t],this.clear());return this._area=e,this},_in:function(e){return"string"!=typeof e&&(e=o.stringify(e)),this._ns?this._ns+e:e},_out:function(e){return this._ns?e&&0===e.indexOf(this._ns)?e.substring(this._ns.length):void 0:e}},storage:function(e){return o.inherit(o.storageAPI,{items:{},name:e})},storageAPI:{length:0,has:function(e){return this.items.hasOwnProperty(e)},key:function(e){var t=0;for(var n in this.items)if(this.has(n)&&e===t++)return n},setItem:function(e,t){this.has(e)||this.length++,this.items[e]=t},removeItem:function(e){this.has(e)&&(delete this.items[e],this.length--)},getItem:function(e){return this.has(e)?this.items[e]:null},clear:function(){for(var e in this.items)this.removeItem(e)}}},r=o.Store("local",function(){try{return localStorage}catch(e){}}());r.local=r,r._=o,r.area("session",function(){try{return sessionStorage}catch(e){}}()),r.area("page",o.storage("page")),"function"==typeof n&&void 0!==n.amd?n("store2",[],(function(){return r})):e.exports?e.exports=r:(t.store&&(o.conflict=t.store),t.store=r)}(this,this&&this.define)},function(e,t,n){"use strict";var o,r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},o=[],r=0;r<e.length;r++){var i=e[r],c=t.base?i[0]+t.base:i[0],l=n[c]||0,d="".concat(c," ").concat(l);n[c]=l+1;var u=s(d),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(a[u].references++,a[u].updater(f)):a.push({identifier:d,updater:v(f,t),references:1}),o.push(d)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function f(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function h(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var m=null,p=0;function v(e,t){var n,o,r;if(t.singleton){var i=p++;n=m||(m=l(t)),o=f.bind(null,n,i,!1),r=f.bind(null,n,i,!0)}else n=l(t),o=h.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=s(n[o]);a[r].references--}for(var i=c(e,t),l=0;l<n.length;l++){var d=s(n[l]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}n=i}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([r]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){var o=n(1),r=n(4);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},function(e,t,n){(t=n(2)(!1)).push([e.i,'.modal{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.modal__overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center}.modal__container{background-color:#fff;padding:30px;max-width:500px;max-height:100vh;border-radius:4px;overflow-y:auto;box-sizing:border-box}.modal__header{display:flex;justify-content:space-between;align-items:center}.modal__title{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.25rem;line-height:1.25;color:#00449e;box-sizing:border-box}.modal__notice{font-size:12px;color:red}.modal__close{background:transparent;border:0}.modal__header .modal__close::before{content:"✕"}.modal__content{margin-top:2rem;margin-bottom:2rem;line-height:1.5;color:rgba(0,0,0,.8)}.modal__btn{font-size:.875rem;padding-left:1rem;padding-right:1rem;padding-top:.5rem;padding-bottom:.5rem;background-color:#e6e6e6;color:rgba(0,0,0,.8);border-radius:.25rem;border-style:none;border-width:0;cursor:pointer;-webkit-appearance:button;text-transform:none;overflow:visible;line-height:1.15;margin:0;will-change:transform;-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out}.modal__btn:focus,.modal__btn:hover{-webkit-transform:scale(1.05);transform:scale(1.05)}.modal__btn-primary{background-color:#00449e;color:#fff}@keyframes mmfadeIn{from{opacity:0}to{opacity:1}}@keyframes mmfadeOut{from{opacity:1}to{opacity:0}}@keyframes mmslideIn{from{transform:translateY(15%)}to{transform:translateY(0)}}@keyframes mmslideOut{from{transform:translateY(0)}to{transform:translateY(-10%)}}.micromodal-slide{display:none}.micromodal-slide.is-open{display:block}.micromodal-slide .modal__container,.micromodal-slide .modal__overlay{will-change:transform}.micromodal-slide[aria-hidden=false] .modal__overlay{animation:mmfadeIn .3s cubic-bezier(0, 0, 0.2, 1)}.micromodal-slide[aria-hidden=false] .modal__container{animation:mmslideIn .3s cubic-bezier(0, 0, 0.2, 1)}.micromodal-slide[aria-hidden=true] .modal__overlay{animation:mmfadeOut .3s cubic-bezier(0, 0, 0.2, 1)}.micromodal-slide[aria-hidden=true] .modal__container{animation:mmslideOut .3s cubic-bezier(0, 0, 0.2, 1)}',""]),e.exports=t},function(e,t,n){var o=n(1),r=n(6);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},function(e,t,n){(t=n(2)(!1)).push([e.i,"*{box-sizing:border-box}main{padding:10px}h1{text-align:center;width:10%;box-shadow:0 3px 0 0 rgba(0,0,0,.75)}h2{color:#1a2e26}ul{list-style:none}li{margin-bottom:20px}.todo-list-items{list-style-type:none;color:#04f;cursor:pointer}.todo-list-items:hover{color:#4343ad}button{cursor:pointer}",""]),e.exports=t},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.r(t);var a,s,c,l,d,u=(a=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],s=function(){function e(t){var n=t.targetModal,o=t.triggers,i=void 0===o?[]:o,a=t.onShow,s=void 0===a?function(){}:a,c=t.onClose,l=void 0===c?function(){}:c,d=t.openTrigger,u=void 0===d?"data-micromodal-trigger":d,f=t.closeTrigger,h=void 0===f?"data-micromodal-close":f,m=t.openClass,p=void 0===m?"is-open":m,v=t.disableScroll,g=void 0!==v&&v,b=t.disableFocus,y=void 0!==b&&b,_=t.awaitCloseAnimation,w=void 0!==_&&_,C=t.awaitOpenAnimation,E=void 0!==C&&C,k=t.debugMode,x=void 0!==k&&k;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=document.getElementById(n),this.config={debugMode:x,disableScroll:g,openTrigger:u,closeTrigger:h,openClass:p,onShow:s,onClose:l,awaitCloseAnimation:w,awaitOpenAnimation:E,disableFocus:y},i.length>0&&this.registerTriggers.apply(this,r(i)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t,n,i;return t=e,(n=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];n.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var n=function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener("animationend",n,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(n),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(e)}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(a);return Array.apply(void 0,r(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var n=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&n===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&o(t.prototype,n),i&&o(t,i),e}(),c=null,l=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},d=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var n in t)l(n);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=r(document.querySelectorAll("[".concat(t.openTrigger,"]"))),o=function(e,t){var n=[];return e.forEach((function(e){var o=e.attributes[t].value;void 0===n[o]&&(n[o]=[]),n[o].push(e)})),n}(n,t.openTrigger);if(!0!==t.debugMode||!1!==d(n,o))for(var i in o){var a=o[i];t.targetModal=i,t.triggers=r(a),c=new s(t)}},show:function(e,t){var n=t||{};n.targetModal=e,!0===n.debugMode&&!1===l(e)||(c&&c.removeEventListeners(),(c=new s(n)).showModal())},close:function(e){e?c.closeModalById(e):c.closeModal()}});window.MicroModal=u;var f=u,h=n(0),m=n.n(h);var p=class{constructor(e,t){this.title=e,this.description=t,this.todoList=[]}};var v=class{constructor(e,t,n,o=0,r=!1){this.title=e,this.description=t,this.dueDate=n,this.priority=o,this.complete=r}};var g=(()=>{const e=document.querySelector("#projects"),t=document.querySelector(".modal__content"),n=document.querySelector(".modal__title");let o=[new p("default","This is the default toDo list")],r=!0;const i=()=>document.querySelector(".modal__btn").click(),a=e=>{for(;e.firstChild;)e.removeChild(e.lastChild)},s=e=>{document.querySelector(".modal__notice").textContent=e},c=e=>{let t=!0;return e.forEach(e=>{e.length<1&&(t=!1)}),!1===t&&s("All fields Required"),t},l=(e,t)=>{e.todoList=e.todoList.filter(e=>e!==t),h(),i()},d=(e,o)=>{a(t),n.textContent=e.title,Object.entries(e).forEach(e=>{const n=document.createElement("p");n.textContent=`${e[0]}: ${e[1]}`,t.appendChild(n)});const r=document.createElement("button"),i=document.createElement("button");r.textContent="Remove Todo",t.appendChild(r),r.addEventListener("click",()=>l(o,e)),i.textContent="Edit Todo",t.appendChild(i),i.addEventListener("click",()=>((e,t)=>{y(!0,t,e)})(o,e))},u=e=>{const t=document.createElement("ul");return e.todoList.forEach(n=>{const o=document.createElement("li"),r=document.createElement("button");r.textContent=""+(n.complete?"Done":"Not Done"),o.innerHTML=`<strong>${n.title}</strong> - Due: ${n.dueDate}`,t.appendChild(r),r.addEventListener("click",()=>(e=>{e.complete=!e.complete,h()})(n)),o.classList.add("todo-list-items"),o.addEventListener("click",()=>d(n,e)),o.setAttribute("data-micromodal-trigger","modal-1"),t.appendChild(o)}),t},h=()=>{a(e),m()("projects")&&r?(o=m()("projects"),r=!1):m()("projects",o),o.forEach(t=>{const n=document.createElement("h2"),o=document.createElement("hr");n.textContent=t.title,e.appendChild(n);const r=u(t);e.appendChild(r),e.appendChild(o),f.init()})},g=e=>{e.preventDefault();const t=document.querySelector(".project-title").value,n=document.querySelector(".project-description").value;if(!c([t,n]))return;const r=new p(t,n);o.push(r),h(),i()},b=e=>{e.preventDefault();const t=document.querySelector(".todo-project").value,n=o.filter(e=>e.title===t),r=document.querySelector(".todo-title").value,a=document.querySelector(".todo-description").value,s=document.querySelector(".todo-dueDate").value,l=document.querySelector('input[name="priority"]:checked').textContent;if(!c([r,a,s,l]))return;const d=new v(r,a,s,l);n[0].todoList.push(d),h(),i()},y=(e,r,i)=>{s(""),a(t);const c=document.createElement("form"),d=document.createElement("select");d.classList.add("todo-project"),[["Title","text","title"],["Description","text","description"],["DueDate","date","dueDate"],["Low","radio","priority"],["Medium","radio","priority"],["High","radio","priority"]].forEach(t=>{const n=document.createElement("br"),o=document.createElement("label");o.textContent=t[0],c.appendChild(o),c.appendChild(n);const i=document.createElement("input");[i.textContent,i.type,i.name]=t,e&&(i.value=r[t[2]]),i.classList.add("todo-"+t[2]),c.appendChild(i),c.appendChild(n)}),o.forEach(e=>{const t=document.createElement("option");t.textContent=e.title,d.appendChild(t)}),c.appendChild(d);const u=document.createElement("button");e?(n.textContent="Edit Todo",u.textContent="Finished Edit",u.addEventListener("click",()=>l(i,r))):(n.textContent="Add Todo",u.textContent="Create Todo"),u.addEventListener("click",b),c.appendChild(u),t.appendChild(c)};return{renderProjects:h,createProjectForm:()=>{s(""),a(t),n.textContent="Add Project";const e=document.createElement("form");["title","description"].forEach(t=>{const n=document.createElement("br"),o=document.createElement("label");o.textContent=t,e.appendChild(o),e.appendChild(n);const r=document.createElement("input");r.textContent=t,r.classList.add("project-"+t),e.appendChild(r),e.appendChild(n)});const o=document.createElement("button");o.textContent="Create Project",e.appendChild(o),o.addEventListener("click",g),t.appendChild(e)},createTodoForm:y}})();n(3),n(5);document.querySelector(".create-todo-btn").addEventListener("click",()=>g.createTodoForm(!1,{},{})),document.querySelector(".create-project-btn").addEventListener("click",g.createProjectForm),g.renderProjects()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0b3JlMi9kaXN0L3N0b3JlMi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kYWwuc2Nzcz8xMDRiIiwid2VicGFjazovLy8uL3NyYy9tb2RhbC5zY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5zY3NzPzc1YmEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pY3JvbW9kYWwvZGlzdC9taWNyb21vZGFsLmVzLmpzIiwid2VicGFjazovLy8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdG9kb3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ3aW5kb3ciLCJkZWZpbmUiLCJfIiwidmVyc2lvbiIsImFyZWFzIiwiYXBpcyIsImluaGVyaXQiLCJhcGkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJKU09OIiwicGFyc2UiLCJmbiIsInJldml2ZSIsImUiLCJzdG9yZUFQSSIsImFyZWEiLCJnZXRJdGVtIiwic2V0Iiwic3RyaW5nIiwic2V0SXRlbSIsInJlbW92ZSIsInJlbW92ZUl0ZW0iLCJsZW5ndGgiLCJjbGVhciIsIlN0b3JlIiwiaWQiLCJuYW1lc3BhY2UiLCJzdG9yZSIsImRhdGEiLCJvdmVyd3JpdGUiLCJhcmd1bWVudHMiLCJnZXRBbGwiLCJ0cmFuc2FjdCIsImVhY2giLCJzZXRBbGwiLCJfaWQiLCJfYXJlYSIsInN0b3JhZ2UiLCJfbnMiLCJ0aGlzIiwic2luZ2xlQXJlYSIsInN1YnN0cmluZyIsImlzRmFrZSIsInRvU3RyaW5nIiwiaGFzIiwiX2luIiwic2l6ZSIsImtleXMiLCJmaWxsIiwiX291dCIsImZpbGxMaXN0IiwiayIsInYiLCJsaXN0IiwicHVzaCIsImFsdCIsImZpbGxPYmoiLCJhbGwiLCJ2YWwiLCJyZXQiLCJjaGFuZ2VkIiwiYWRkIiwiQXJyYXkiLCJjb25jYXQiLCJ0eXBlIiwiY2xlYXJBbGwiLCJpbmRleE9mIiwic3RvcmFnZUFQSSIsIml0ZW1zIiwibG9jYWxTdG9yYWdlIiwibG9jYWwiLCJzZXNzaW9uU3RvcmFnZSIsImFtZCIsImNvbmZsaWN0IiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiZG9jdW1lbnQiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwic3R5bGVzSW5Eb20iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJtb2R1bGVzVG9Eb20iLCJvcHRpb25zIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiaXRlbSIsImJhc2UiLCJjb3VudCIsImluZGV4Iiwib2JqIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsIm5vbmNlIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwidXNlU291cmNlTWFwIiwibWFwIiwiY29udGVudCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwiYmFzZTY0Iiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiZGVmYXVsdCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJpc0FycmF5IiwiX2FycmF5TGlrZVRvQXJyYXkiLCJfYXJyYXlXaXRob3V0SG9sZXMiLCJpdGVyIiwiaXRlcmF0b3IiLCJmcm9tIiwiX2l0ZXJhYmxlVG9BcnJheSIsIm1pbkxlbiIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJ0ZXN0IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiVHlwZUVycm9yIiwiX25vbkl0ZXJhYmxlU3ByZWFkIiwibGVuIiwiYXJyMiIsIkZPQ1VTQUJMRV9FTEVNRU5UUyIsIk1vZGFsIiwiYWN0aXZlTW9kYWwiLCJ2YWxpZGF0ZU1vZGFsUHJlc2VuY2UiLCJ2YWxpZGF0ZUFyZ3MiLCJNaWNyb01vZGFsIiwiX3JlZiIsInRhcmdldE1vZGFsIiwiX3JlZiR0cmlnZ2VycyIsInRyaWdnZXJzIiwiX3JlZiRvblNob3ciLCJvblNob3ciLCJfcmVmJG9uQ2xvc2UiLCJvbkNsb3NlIiwiX3JlZiRvcGVuVHJpZ2dlciIsIm9wZW5UcmlnZ2VyIiwiX3JlZiRjbG9zZVRyaWdnZXIiLCJjbG9zZVRyaWdnZXIiLCJfcmVmJG9wZW5DbGFzcyIsIm9wZW5DbGFzcyIsIl9yZWYkZGlzYWJsZVNjcm9sbCIsImRpc2FibGVTY3JvbGwiLCJfcmVmJGRpc2FibGVGb2N1cyIsImRpc2FibGVGb2N1cyIsIl9yZWYkYXdhaXRDbG9zZUFuaW1hdCIsImF3YWl0Q2xvc2VBbmltYXRpb24iLCJfcmVmJGF3YWl0T3BlbkFuaW1hdGkiLCJhd2FpdE9wZW5BbmltYXRpb24iLCJfcmVmJGRlYnVnTW9kZSIsImRlYnVnTW9kZSIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJtb2RhbCIsImdldEVsZW1lbnRCeUlkIiwiY29uZmlnIiwicmVnaXN0ZXJUcmlnZ2VycyIsImFwcGx5Iiwib25DbGljayIsIm9uS2V5ZG93biIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl90aGlzIiwiX2xlbiIsIl9rZXkiLCJ0cmlnZ2VyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic2hvd01vZGFsIiwiX3RoaXMyIiwiYWN0aXZlRWxlbWVudCIsImNsYXNzTGlzdCIsInNjcm9sbEJlaGF2aW91ciIsImFkZEV2ZW50TGlzdGVuZXJzIiwiaGFuZGxlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRGb2N1c1RvRmlyc3ROb2RlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJmb2N1cyIsImNsb3NlTW9kYWwiLCJ0b2dnbGUiLCJib2R5IiwiYXNzaWduIiwib3ZlcmZsb3ciLCJoYXNBdHRyaWJ1dGUiLCJrZXlDb2RlIiwicmV0YWluRm9jdXMiLCJub2RlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdGhpczMiLCJmb2N1c2FibGVOb2RlcyIsImdldEZvY3VzYWJsZU5vZGVzIiwibm9kZXNXaGljaEFyZU5vdENsb3NlVGFyZ2V0cyIsIm5vZGUiLCJvZmZzZXRQYXJlbnQiLCJjb250YWlucyIsImZvY3VzZWRJdGVtSW5kZXgiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsIndhcm4iLCJ0cmlnZ2VyTWFwIiwidmFsaWRhdGVUcmlnZ2VyUHJlc2VuY2UiLCJpbml0IiwidHJpZ2dlckF0dHIiLCJnZW5lcmF0ZVRyaWdnZXJNYXAiLCJzaG93IiwiY2xvc2UiLCJjbG9zZU1vZGFsQnlJZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0b2RvTGlzdCIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlIiwicHJvamVjdERpdiIsIm1vZGFsQ29udGVudCIsIm1vZGFsVGl0bGUiLCJwcm9qZWN0TGlzdCIsImZpcnN0UmVuZGVyIiwiY2xpY2siLCJjbGVhblBhZ2UiLCJlbGVtZW50IiwibGFzdENoaWxkIiwic2V0Tm90aWNlIiwidGV4dCIsInRleHRDb250ZW50IiwiY2hlY2tJbnB1dHMiLCJpbnB1dHNQYXNzIiwiaW5wdXQiLCJyZW1vdmVUb2RvIiwicHJvamVjdCIsInRvZG8iLCJyZW5kZXJQcm9qZWN0cyIsInJlbmRlclRvZG8iLCJlbnRyaWVzIiwiZGVsQnRuIiwiZWRpdEJ0biIsImNyZWF0ZVRvZG9Gb3JtIiwiZWRpdFRvZG8iLCJnZXRUb2RvTGlzdCIsInVsIiwibGkiLCJjb21wbGV0ZUJ0biIsImlubmVySFRNTCIsInRvZ2dsZURvbmUiLCJoMiIsImhyIiwiY3JlYXRlUHJvamVjdCIsIm5ld1Byb2plY3QiLCJjcmVhdGVUb2RvIiwicHJvamVjdE5hbWUiLCJuZXdUb2RvIiwiZWRpdGVkIiwiZm9ybSIsInNlbGVjdCIsImJyIiwibGFiZWwiLCJvcHRpb24iLCJidXR0b24iLCJjcmVhdGVQcm9qZWN0Rm9ybSIsImlucHV0QXJlYSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNE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QUFTOEIsY0FBYyxVQUN0QzJOLEVBQU9qQyxZQUFjLGlCQUNyQjRCLEVBQUsvTSxZQUFZb04sR0FDakJBLEVBQU83RixpQkFBaUIsUUFBU2tGLEdBQ2pDaEMsRUFBYXpLLFlBQVkrTSxJQTREaUJoQixtQkF0TTlCLEcsVUNBaEJwTyxTQUFTSyxjQUFjLG9CQUFvQnVKLGlCQUFpQixRQUFTLElBQU0sRUFBUXdFLGdCQUFlLEVBQU8sR0FBSSxLQUM3R3BPLFNBQVNLLGNBQWMsdUJBQXVCdUosaUJBQWlCLFFBQVMsRUFBUThGLG1CQUVoRixFQUFRM0IiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDcpO1xuIiwiLyohIHN0b3JlMiAtIHYyLjExLjIgLSAyMDIwLTA1LTExXG4qIENvcHlyaWdodCAoYykgMjAyMCBOYXRoYW4gQnVibmE7IExpY2Vuc2VkIChNSVQgT1IgR1BMLTMuMCkgKi9cbjsoZnVuY3Rpb24od2luZG93LCBkZWZpbmUpIHtcbiAgICB2YXIgXyA9IHtcbiAgICAgICAgdmVyc2lvbjogXCIyLjExLjJcIixcbiAgICAgICAgYXJlYXM6IHt9LFxuICAgICAgICBhcGlzOiB7fSxcblxuICAgICAgICAvLyB1dGlsaXRpZXNcbiAgICAgICAgaW5oZXJpdDogZnVuY3Rpb24oYXBpLCBvKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIGFwaSkge1xuICAgICAgICAgICAgICAgIGlmICghby5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgcCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhcGksIHApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfSxcbiAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gZCA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgPyBkKycnIDogSlNPTi5zdHJpbmdpZnkoZCk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbihzLCBmbikge1xuICAgICAgICAgICAgLy8gaWYgaXQgZG9lc24ndCBwYXJzZSwgcmV0dXJuIGFzIGlzXG4gICAgICAgICAgICB0cnl7IHJldHVybiBKU09OLnBhcnNlKHMsZm58fF8ucmV2aXZlKTsgfWNhdGNoKGUpeyByZXR1cm4gczsgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGV4dGVuc2lvbiBob29rc1xuICAgICAgICBmbjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICAgICAgICAgIF8uc3RvcmVBUElbbmFtZV0gPSBmbjtcbiAgICAgICAgICAgIGZvciAodmFyIGFwaSBpbiBfLmFwaXMpIHtcbiAgICAgICAgICAgICAgICBfLmFwaXNbYXBpXVtuYW1lXSA9IGZuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKGFyZWEsIGtleSl7IHJldHVybiBhcmVhLmdldEl0ZW0oa2V5KTsgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihhcmVhLCBrZXksIHN0cmluZyl7IGFyZWEuc2V0SXRlbShrZXksIHN0cmluZyk7IH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oYXJlYSwga2V5KXsgYXJlYS5yZW1vdmVJdGVtKGtleSk7IH0sXG4gICAgICAgIGtleTogZnVuY3Rpb24oYXJlYSwgaSl7IHJldHVybiBhcmVhLmtleShpKTsgfSxcbiAgICAgICAgbGVuZ3RoOiBmdW5jdGlvbihhcmVhKXsgcmV0dXJuIGFyZWEubGVuZ3RoOyB9LFxuICAgICAgICBjbGVhcjogZnVuY3Rpb24oYXJlYSl7IGFyZWEuY2xlYXIoKTsgfSxcblxuICAgICAgICAvLyBjb3JlIGZ1bmN0aW9uc1xuICAgICAgICBTdG9yZTogZnVuY3Rpb24oaWQsIGFyZWEsIG5hbWVzcGFjZSkge1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gXy5pbmhlcml0KF8uc3RvcmVBUEksIGZ1bmN0aW9uKGtleSwgZGF0YSwgb3ZlcndyaXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApeyByZXR1cm4gc3RvcmUuZ2V0QWxsKCk7IH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09IFwiZnVuY3Rpb25cIil7IHJldHVybiBzdG9yZS50cmFuc2FjdChrZXksIGRhdGEsIG92ZXJ3cml0ZSk7IH0vLyBmbj1kYXRhLCBhbHQ9b3ZlcndyaXRlXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCl7IHJldHVybiBzdG9yZS5zZXQoa2V5LCBkYXRhLCBvdmVyd3JpdGUpOyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGtleSA9PT0gXCJudW1iZXJcIil7IHJldHVybiBzdG9yZS5nZXQoa2V5KTsgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSBcImZ1bmN0aW9uXCIpeyByZXR1cm4gc3RvcmUuZWFjaChrZXkpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCFrZXkpeyByZXR1cm4gc3RvcmUuY2xlYXIoKTsgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5zZXRBbGwoa2V5LCBkYXRhKTsvLyBvdmVyd3JpdGU9ZGF0YSwgZGF0YT1rZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RvcmUuX2lkID0gaWQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXN0S2V5ID0gJ18tYmFkLV8nO1xuICAgICAgICAgICAgICAgIGFyZWEuc2V0SXRlbSh0ZXN0S2V5LCAnd29sZicpO1xuICAgICAgICAgICAgICAgIHN0b3JlLl9hcmVhID0gYXJlYTtcbiAgICAgICAgICAgICAgICBhcmVhLnJlbW92ZUl0ZW0odGVzdEtleSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgaWYgKCFzdG9yZS5fYXJlYSkge1xuICAgICAgICAgICAgICAgIHN0b3JlLl9hcmVhID0gXy5zdG9yYWdlKCdmYWtlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yZS5fbnMgPSBuYW1lc3BhY2UgfHwgJyc7XG4gICAgICAgICAgICBpZiAoIV8uYXJlYXNbaWRdKSB7XG4gICAgICAgICAgICAgICAgXy5hcmVhc1tpZF0gPSBzdG9yZS5fYXJlYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghXy5hcGlzW3N0b3JlLl9ucytzdG9yZS5faWRdKSB7XG4gICAgICAgICAgICAgICAgXy5hcGlzW3N0b3JlLl9ucytzdG9yZS5faWRdID0gc3RvcmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICAgIH0sXG4gICAgICAgIHN0b3JlQVBJOiB7XG4gICAgICAgICAgICAvLyBhZG1pbiBmdW5jdGlvbnNcbiAgICAgICAgICAgIGFyZWE6IGZ1bmN0aW9uKGlkLCBhcmVhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdGhpc1tpZF07XG4gICAgICAgICAgICAgICAgaWYgKCFzdG9yZSB8fCAhc3RvcmUuYXJlYSkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZSA9IF8uU3RvcmUoaWQsIGFyZWEsIHRoaXMuX25zKTsvL25ldyBhcmVhLXNwZWNpZmljIGFwaSBpbiB0aGlzIG5hbWVzcGFjZVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNbaWRdKXsgdGhpc1tpZF0gPSBzdG9yZTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmFtZXNwYWNlOiBmdW5jdGlvbihuYW1lc3BhY2UsIHNpbmdsZUFyZWEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ucyA/IHRoaXMuX25zLnN1YnN0cmluZygwLHRoaXMuX25zLmxlbmd0aC0xKSA6ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbnMgPSBuYW1lc3BhY2UsIHN0b3JlID0gdGhpc1tuc107XG4gICAgICAgICAgICAgICAgaWYgKCFzdG9yZSB8fCAhc3RvcmUubmFtZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlID0gXy5TdG9yZSh0aGlzLl9pZCwgdGhpcy5fYXJlYSwgdGhpcy5fbnMrbnMrJy4nKTsvL25ldyBuYW1lc3BhY2VkIGFwaVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNbbnNdKXsgdGhpc1tuc10gPSBzdG9yZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNpbmdsZUFyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gXy5hcmVhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmFyZWEobmFtZSwgXy5hcmVhc1tuYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRmFrZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuX2FyZWEubmFtZSA9PT0gJ2Zha2UnOyB9LFxuICAgICAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnc3RvcmUnKyh0aGlzLl9ucz8nLicrdGhpcy5uYW1lc3BhY2UoKTonJykrJ1snK3RoaXMuX2lkKyddJztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIHN0b3JhZ2UgZnVuY3Rpb25zXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hcmVhLmhhcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYXJlYS5oYXModGhpcy5faW4oa2V5KSk7Ly9leHRlbnNpb24gaG9va1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gISEodGhpcy5faW4oa2V5KSBpbiB0aGlzLl9hcmVhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaXplOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5rZXlzKCkubGVuZ3RoOyB9LFxuICAgICAgICAgICAgZWFjaDogZnVuY3Rpb24oZm4sIGZpbGwpIHsvLyBmaWxsIGlzIHVzZWQgYnkga2V5cyhmaWxsTGlzdCkgYW5kIGdldEFsbChmaWxsTGlzdCkpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wLCBtPV8ubGVuZ3RoKHRoaXMuX2FyZWEpOyBpPG07IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5fb3V0KF8ua2V5KHRoaXMuX2FyZWEsIGkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm4uY2FsbCh0aGlzLCBrZXksIHRoaXMuZ2V0KGtleSksIGZpbGwpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtID4gXy5sZW5ndGgodGhpcy5fYXJlYSkpIHsgbS0tOyBpLS07IH0vLyBpbiBjYXNlIG9mIHJlbW92ZUl0ZW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGwgfHwgdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBrZXlzOiBmdW5jdGlvbihmaWxsTGlzdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaywgdiwgbGlzdCl7IGxpc3QucHVzaChrKTsgfSwgZmlsbExpc3QgfHwgW10pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oa2V5LCBhbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IF8uZ2V0KHRoaXMuX2FyZWEsIHRoaXMuX2luKGtleSkpLFxuICAgICAgICAgICAgICAgICAgICBmbjtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFsdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuID0gYWx0O1xuICAgICAgICAgICAgICAgICAgICBhbHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcyAhPT0gbnVsbCA/IF8ucGFyc2UocywgZm4pIDpcbiAgICAgICAgICAgICAgICAgICAgYWx0ICE9IG51bGwgPyBhbHQgOiBzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEFsbDogZnVuY3Rpb24oZmlsbE9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaywgdiwgYWxsKXsgYWxsW2tdID0gdjsgfSwgZmlsbE9iaiB8fCB7fSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhbnNhY3Q6IGZ1bmN0aW9uKGtleSwgZm4sIGFsdCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLmdldChrZXksIGFsdCksXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGZuKHZhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCByZXQgPT09IHVuZGVmaW5lZCA/IHZhbCA6IHJldCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihrZXksIGRhdGEsIG92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoZCAhPSBudWxsICYmIG92ZXJ3cml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfLnNldCh0aGlzLl9hcmVhLCB0aGlzLl9pbihrZXkpLCBfLnN0cmluZ2lmeShkYXRhKSwgb3ZlcndyaXRlKSB8fCBkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldEFsbDogZnVuY3Rpb24oZGF0YSwgb3ZlcndyaXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZWQsIHZhbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSBkYXRhW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldChrZXksIHZhbCwgb3ZlcndyaXRlKSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKGtleSwgZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBkID0gdGhpcy5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoZCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkLmNvbmNhdChkYXRhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IHR5cGVvZiBkYXRhICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2tdID0gZGF0YVtrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGQgKyBkYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF8uc2V0KHRoaXMuX2FyZWEsIHRoaXMuX2luKGtleSksIF8uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSwgYWx0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmdldChrZXksIGFsdCk7XG4gICAgICAgICAgICAgICAgXy5yZW1vdmUodGhpcy5fYXJlYSwgdGhpcy5faW4oa2V5KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5jbGVhcih0aGlzLl9hcmVhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oayl7IF8ucmVtb3ZlKHRoaXMuX2FyZWEsIHRoaXMuX2luKGspKTsgfSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJlYSA9IHRoaXMuX2FyZWE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gXy5hcmVhcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXy5hcmVhcy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FyZWEgPSBfLmFyZWFzW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9hcmVhID0gYXJlYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIGludGVybmFsIHVzZSBmdW5jdGlvbnNcbiAgICAgICAgICAgIF9pbjogZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgayAhPT0gXCJzdHJpbmdcIil7IGsgPSBfLnN0cmluZ2lmeShrKTsgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ucyA/IHRoaXMuX25zICsgayA6IGs7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX291dDogZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ucyA/XG4gICAgICAgICAgICAgICAgICAgIGsgJiYgay5pbmRleE9mKHRoaXMuX25zKSA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBrLnN1YnN0cmluZyh0aGlzLl9ucy5sZW5ndGgpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCA6IC8vIHNvIGVhY2goKSBrbm93cyB0byBza2lwIGl0XG4gICAgICAgICAgICAgICAgICAgIGs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sLy8gZW5kIF8uc3RvcmVBUElcbiAgICAgICAgc3RvcmFnZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIF8uaW5oZXJpdChfLnN0b3JhZ2VBUEksIHsgaXRlbXM6IHt9LCBuYW1lOiBuYW1lIH0pO1xuICAgICAgICB9LFxuICAgICAgICBzdG9yYWdlQVBJOiB7XG4gICAgICAgICAgICBsZW5ndGg6IDAsXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKGspeyByZXR1cm4gdGhpcy5pdGVtcy5oYXNPd25Qcm9wZXJ0eShrKTsgfSxcbiAgICAgICAgICAgIGtleTogZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHRoaXMuaXRlbXMpe1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXMoaykgJiYgaSA9PT0gYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRJdGVtOiBmdW5jdGlvbihrLCB2KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhcyhrKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2tdID0gdjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVJdGVtOiBmdW5jdGlvbihrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzKGspKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW2tdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbihrKXsgcmV0dXJuIHRoaXMuaGFzKGspID8gdGhpcy5pdGVtc1trXSA6IG51bGw7IH0sXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oKXsgZm9yICh2YXIgayBpbiB0aGlzLml0ZW1zKXsgdGhpcy5yZW1vdmVJdGVtKGspOyB9IH1cbiAgICAgICAgfS8vIGVuZCBfLnN0b3JhZ2VBUElcbiAgICB9O1xuXG4gICAgdmFyIHN0b3JlID1cbiAgICAgICAgLy8gc2FmZWx5IHNldCB0aGlzIHVwICh0aHJvd3MgZXJyb3IgaW4gSUUxMC8zMmJpdCBtb2RlIGZvciBsb2NhbCBmaWxlcylcbiAgICAgICAgXy5TdG9yZShcImxvY2FsXCIsIChmdW5jdGlvbigpe3RyeXsgcmV0dXJuIGxvY2FsU3RvcmFnZTsgfWNhdGNoKGUpe319KSgpKTtcbiAgICBzdG9yZS5sb2NhbCA9IHN0b3JlOy8vIGZvciBjb21wbGV0ZW5lc3NcbiAgICBzdG9yZS5fID0gXzsvLyBmb3IgZXh0ZW5kZXJzIGFuZCBkZWJ1Z2dlcnMuLi5cbiAgICAvLyBzYWZlbHkgc2V0dXAgc3RvcmUuc2Vzc2lvbiAodGhyb3dzIGV4Y2VwdGlvbiBpbiBGRiBmb3IgZmlsZTovLy8gdXJscylcbiAgICBzdG9yZS5hcmVhKFwic2Vzc2lvblwiLCAoZnVuY3Rpb24oKXt0cnl7IHJldHVybiBzZXNzaW9uU3RvcmFnZTsgfWNhdGNoKGUpe319KSgpKTtcbiAgICBzdG9yZS5hcmVhKFwicGFnZVwiLCBfLnN0b3JhZ2UoXCJwYWdlXCIpKTtcblxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWZpbmUoJ3N0b3JlMicsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBzdG9yZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBleHBvc2UgdGhlIHByaW1hcnkgc3RvcmUgZm4gdG8gdGhlIGdsb2JhbCBvYmplY3QgYW5kIHNhdmUgY29uZmxpY3RzXG4gICAgICAgIGlmICh3aW5kb3cuc3RvcmUpeyBfLmNvbmZsaWN0ID0gd2luZG93LnN0b3JlOyB9XG4gICAgICAgIHdpbmRvdy5zdG9yZSA9IHN0b3JlO1xuICAgIH1cblxufSkodGhpcywgdGhpcyAmJiB0aGlzLmRlZmluZSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL21vZGFsLnNjc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubW9kYWx7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSxCbGlua01hY1N5c3RlbUZvbnQsYXZlbmlyIG5leHQsYXZlbmlyLGhlbHZldGljYSBuZXVlLGhlbHZldGljYSx1YnVudHUscm9ib3RvLG5vdG8sc2Vnb2UgdWksYXJpYWwsc2Fucy1zZXJpZn0ubW9kYWxfX292ZXJsYXl7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC42KTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9Lm1vZGFsX19jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZmO3BhZGRpbmc6MzBweDttYXgtd2lkdGg6NTAwcHg7bWF4LWhlaWdodDoxMDB2aDtib3JkZXItcmFkaXVzOjRweDtvdmVyZmxvdy15OmF1dG87Ym94LXNpemluZzpib3JkZXItYm94fS5tb2RhbF9faGVhZGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9Lm1vZGFsX190aXRsZXttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6MS4yNXJlbTtsaW5lLWhlaWdodDoxLjI1O2NvbG9yOiMwMDQ0OWU7Ym94LXNpemluZzpib3JkZXItYm94fS5tb2RhbF9fbm90aWNle2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnJlZH0ubW9kYWxfX2Nsb3Nle2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOjB9Lm1vZGFsX19oZWFkZXIgLm1vZGFsX19jbG9zZTo6YmVmb3Jle2NvbnRlbnQ6XFxcIuKclVxcXCJ9Lm1vZGFsX19jb250ZW50e21hcmdpbi10b3A6MnJlbTttYXJnaW4tYm90dG9tOjJyZW07bGluZS1oZWlnaHQ6MS41O2NvbG9yOnJnYmEoMCwwLDAsLjgpfS5tb2RhbF9fYnRue2ZvbnQtc2l6ZTouODc1cmVtO3BhZGRpbmctbGVmdDoxcmVtO3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLXRvcDouNXJlbTtwYWRkaW5nLWJvdHRvbTouNXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNlNmU2ZTY7Y29sb3I6cmdiYSgwLDAsMCwuOCk7Ym9yZGVyLXJhZGl1czouMjVyZW07Ym9yZGVyLXN0eWxlOm5vbmU7Ym9yZGVyLXdpZHRoOjA7Y3Vyc29yOnBvaW50ZXI7LXdlYmtpdC1hcHBlYXJhbmNlOmJ1dHRvbjt0ZXh0LXRyYW5zZm9ybTpub25lO292ZXJmbG93OnZpc2libGU7bGluZS1oZWlnaHQ6MS4xNTttYXJnaW46MDt3aWxsLWNoYW5nZTp0cmFuc2Zvcm07LW1vei1vc3gtZm9udC1zbW9vdGhpbmc6Z3JheXNjYWxlOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWigwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWigwKTt0cmFuc2l0aW9uOi13ZWJraXQtdHJhbnNmb3JtIC4yNXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjI1cyBlYXNlLW91dDt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuMjVzIGVhc2Utb3V0LC13ZWJraXQtdHJhbnNmb3JtIC4yNXMgZWFzZS1vdXR9Lm1vZGFsX19idG46Zm9jdXMsLm1vZGFsX19idG46aG92ZXJ7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4wNSk7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfS5tb2RhbF9fYnRuLXByaW1hcnl7YmFja2dyb3VuZC1jb2xvcjojMDA0NDllO2NvbG9yOiNmZmZ9QGtleWZyYW1lcyBtbWZhZGVJbntmcm9te29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fUBrZXlmcmFtZXMgbW1mYWRlT3V0e2Zyb217b3BhY2l0eToxfXRve29wYWNpdHk6MH19QGtleWZyYW1lcyBtbXNsaWRlSW57ZnJvbXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxNSUpfXRve3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1Aa2V5ZnJhbWVzIG1tc2xpZGVPdXR7ZnJvbXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX10b3t0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMTAlKX19Lm1pY3JvbW9kYWwtc2xpZGV7ZGlzcGxheTpub25lfS5taWNyb21vZGFsLXNsaWRlLmlzLW9wZW57ZGlzcGxheTpibG9ja30ubWljcm9tb2RhbC1zbGlkZSAubW9kYWxfX2NvbnRhaW5lciwubWljcm9tb2RhbC1zbGlkZSAubW9kYWxfX292ZXJsYXl7d2lsbC1jaGFuZ2U6dHJhbnNmb3JtfS5taWNyb21vZGFsLXNsaWRlW2FyaWEtaGlkZGVuPWZhbHNlXSAubW9kYWxfX292ZXJsYXl7YW5pbWF0aW9uOm1tZmFkZUluIC4zcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKX0ubWljcm9tb2RhbC1zbGlkZVthcmlhLWhpZGRlbj1mYWxzZV0gLm1vZGFsX19jb250YWluZXJ7YW5pbWF0aW9uOm1tc2xpZGVJbiAuM3MgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSl9Lm1pY3JvbW9kYWwtc2xpZGVbYXJpYS1oaWRkZW49dHJ1ZV0gLm1vZGFsX19vdmVybGF5e2FuaW1hdGlvbjptbWZhZGVPdXQgLjNzIGN1YmljLWJlemllcigwLCAwLCAwLjIsIDEpfS5taWNyb21vZGFsLXNsaWRlW2FyaWEtaGlkZGVuPXRydWVdIC5tb2RhbF9fY29udGFpbmVye2FuaW1hdGlvbjptbXNsaWRlT3V0IC4zcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKX1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiKntib3gtc2l6aW5nOmJvcmRlci1ib3h9bWFpbntwYWRkaW5nOjEwcHh9aDF7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAlO2JveC1zaGFkb3c6MCAzcHggMCAwIHJnYmEoMCwwLDAsLjc1KX1oMntjb2xvcjojMWEyZTI2fXVse2xpc3Qtc3R5bGU6bm9uZX1saXttYXJnaW4tYm90dG9tOjIwcHh9LnRvZG8tbGlzdC1pdGVtc3tsaXN0LXN0eWxlLXR5cGU6bm9uZTtjb2xvcjojMDRmO2N1cnNvcjpwb2ludGVyfS50b2RvLWxpc3QtaXRlbXM6aG92ZXJ7Y29sb3I6IzQzNDNhZH1idXR0b257Y3Vyc29yOnBvaW50ZXJ9XCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obik7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldO1xuXG4gIHJldHVybiBhcnIyO1xufVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG52YXIgTWljcm9Nb2RhbCA9IGZ1bmN0aW9uICgpIHtcblxuICB2YXIgRk9DVVNBQkxFX0VMRU1FTlRTID0gWydhW2hyZWZdJywgJ2FyZWFbaHJlZl0nLCAnaW5wdXQ6bm90KFtkaXNhYmxlZF0pOm5vdChbdHlwZT1cImhpZGRlblwiXSk6bm90KFthcmlhLWhpZGRlbl0pJywgJ3NlbGVjdDpub3QoW2Rpc2FibGVkXSk6bm90KFthcmlhLWhpZGRlbl0pJywgJ3RleHRhcmVhOm5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSknLCAnYnV0dG9uOm5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSknLCAnaWZyYW1lJywgJ29iamVjdCcsICdlbWJlZCcsICdbY29udGVudGVkaXRhYmxlXScsICdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXhePVwiLVwiXSknXTtcblxuICB2YXIgTW9kYWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1vZGFsKF9yZWYpIHtcbiAgICAgIHZhciB0YXJnZXRNb2RhbCA9IF9yZWYudGFyZ2V0TW9kYWwsXG4gICAgICAgICAgX3JlZiR0cmlnZ2VycyA9IF9yZWYudHJpZ2dlcnMsXG4gICAgICAgICAgdHJpZ2dlcnMgPSBfcmVmJHRyaWdnZXJzID09PSB2b2lkIDAgPyBbXSA6IF9yZWYkdHJpZ2dlcnMsXG4gICAgICAgICAgX3JlZiRvblNob3cgPSBfcmVmLm9uU2hvdyxcbiAgICAgICAgICBvblNob3cgPSBfcmVmJG9uU2hvdyA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJG9uU2hvdyxcbiAgICAgICAgICBfcmVmJG9uQ2xvc2UgPSBfcmVmLm9uQ2xvc2UsXG4gICAgICAgICAgb25DbG9zZSA9IF9yZWYkb25DbG9zZSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJG9uQ2xvc2UsXG4gICAgICAgICAgX3JlZiRvcGVuVHJpZ2dlciA9IF9yZWYub3BlblRyaWdnZXIsXG4gICAgICAgICAgb3BlblRyaWdnZXIgPSBfcmVmJG9wZW5UcmlnZ2VyID09PSB2b2lkIDAgPyAnZGF0YS1taWNyb21vZGFsLXRyaWdnZXInIDogX3JlZiRvcGVuVHJpZ2dlcixcbiAgICAgICAgICBfcmVmJGNsb3NlVHJpZ2dlciA9IF9yZWYuY2xvc2VUcmlnZ2VyLFxuICAgICAgICAgIGNsb3NlVHJpZ2dlciA9IF9yZWYkY2xvc2VUcmlnZ2VyID09PSB2b2lkIDAgPyAnZGF0YS1taWNyb21vZGFsLWNsb3NlJyA6IF9yZWYkY2xvc2VUcmlnZ2VyLFxuICAgICAgICAgIF9yZWYkb3BlbkNsYXNzID0gX3JlZi5vcGVuQ2xhc3MsXG4gICAgICAgICAgb3BlbkNsYXNzID0gX3JlZiRvcGVuQ2xhc3MgPT09IHZvaWQgMCA/ICdpcy1vcGVuJyA6IF9yZWYkb3BlbkNsYXNzLFxuICAgICAgICAgIF9yZWYkZGlzYWJsZVNjcm9sbCA9IF9yZWYuZGlzYWJsZVNjcm9sbCxcbiAgICAgICAgICBkaXNhYmxlU2Nyb2xsID0gX3JlZiRkaXNhYmxlU2Nyb2xsID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkZGlzYWJsZVNjcm9sbCxcbiAgICAgICAgICBfcmVmJGRpc2FibGVGb2N1cyA9IF9yZWYuZGlzYWJsZUZvY3VzLFxuICAgICAgICAgIGRpc2FibGVGb2N1cyA9IF9yZWYkZGlzYWJsZUZvY3VzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkZGlzYWJsZUZvY3VzLFxuICAgICAgICAgIF9yZWYkYXdhaXRDbG9zZUFuaW1hdCA9IF9yZWYuYXdhaXRDbG9zZUFuaW1hdGlvbixcbiAgICAgICAgICBhd2FpdENsb3NlQW5pbWF0aW9uID0gX3JlZiRhd2FpdENsb3NlQW5pbWF0ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYkYXdhaXRDbG9zZUFuaW1hdCxcbiAgICAgICAgICBfcmVmJGF3YWl0T3BlbkFuaW1hdGkgPSBfcmVmLmF3YWl0T3BlbkFuaW1hdGlvbixcbiAgICAgICAgICBhd2FpdE9wZW5BbmltYXRpb24gPSBfcmVmJGF3YWl0T3BlbkFuaW1hdGkgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRhd2FpdE9wZW5BbmltYXRpLFxuICAgICAgICAgIF9yZWYkZGVidWdNb2RlID0gX3JlZi5kZWJ1Z01vZGUsXG4gICAgICAgICAgZGVidWdNb2RlID0gX3JlZiRkZWJ1Z01vZGUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRkZWJ1Z01vZGU7XG5cbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbCk7XG5cbiAgICAgIC8vIFNhdmUgYSByZWZlcmVuY2Ugb2YgdGhlIG1vZGFsXG4gICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0TW9kYWwpOyAvLyBTYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBwYXNzZWQgY29uZmlnXG5cbiAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICBkZWJ1Z01vZGU6IGRlYnVnTW9kZSxcbiAgICAgICAgZGlzYWJsZVNjcm9sbDogZGlzYWJsZVNjcm9sbCxcbiAgICAgICAgb3BlblRyaWdnZXI6IG9wZW5UcmlnZ2VyLFxuICAgICAgICBjbG9zZVRyaWdnZXI6IGNsb3NlVHJpZ2dlcixcbiAgICAgICAgb3BlbkNsYXNzOiBvcGVuQ2xhc3MsXG4gICAgICAgIG9uU2hvdzogb25TaG93LFxuICAgICAgICBvbkNsb3NlOiBvbkNsb3NlLFxuICAgICAgICBhd2FpdENsb3NlQW5pbWF0aW9uOiBhd2FpdENsb3NlQW5pbWF0aW9uLFxuICAgICAgICBhd2FpdE9wZW5BbmltYXRpb246IGF3YWl0T3BlbkFuaW1hdGlvbixcbiAgICAgICAgZGlzYWJsZUZvY3VzOiBkaXNhYmxlRm9jdXNcbiAgICAgIH07IC8vIFJlZ2lzdGVyIGNsaWNrIGV2ZW50cyBvbmx5IGlmIHByZSBiaW5kaW5nIGV2ZW50TGlzdGVuZXJzXG5cbiAgICAgIGlmICh0cmlnZ2Vycy5sZW5ndGggPiAwKSB0aGlzLnJlZ2lzdGVyVHJpZ2dlcnMuYXBwbHkodGhpcywgX3RvQ29uc3VtYWJsZUFycmF5KHRyaWdnZXJzKSk7IC8vIHByZSBiaW5kIGZ1bmN0aW9ucyBmb3IgZXZlbnQgbGlzdGVuZXJzXG5cbiAgICAgIHRoaXMub25DbGljayA9IHRoaXMub25DbGljay5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5vbktleWRvd24gPSB0aGlzLm9uS2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29wcyB0aHJvdWdoIGFsbCBvcGVuVHJpZ2dlcnMgYW5kIGJpbmRzIGNsaWNrIGV2ZW50XG4gICAgICogQHBhcmFtICB7YXJyYXl9IHRyaWdnZXJzIFtBcnJheSBvZiBub2RlIGVsZW1lbnRzXVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhNb2RhbCwgW3tcbiAgICAgIGtleTogXCJyZWdpc3RlclRyaWdnZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJUcmlnZ2VycygpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgdHJpZ2dlcnMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgdHJpZ2dlcnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2Vycy5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaG93TW9kYWwoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2hvd01vZGFsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd01vZGFsKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgZXZlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7XG4gICAgICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMubW9kYWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcub3BlbkNsYXNzKTtcbiAgICAgICAgdGhpcy5zY3JvbGxCZWhhdmlvdXIoJ2Rpc2FibGUnKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hd2FpdE9wZW5BbmltYXRpb24pIHtcbiAgICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgICBfdGhpczIubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgaGFuZGxlciwgZmFsc2UpO1xuXG4gICAgICAgICAgICBfdGhpczIuc2V0Rm9jdXNUb0ZpcnN0Tm9kZSgpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldEZvY3VzVG9GaXJzdE5vZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29uZmlnLm9uU2hvdyh0aGlzLm1vZGFsLCB0aGlzLmFjdGl2ZUVsZW1lbnQsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VNb2RhbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG4gICAgICAgIHZhciBldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbnVsbDtcbiAgICAgICAgdmFyIG1vZGFsID0gdGhpcy5tb2RhbDtcbiAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLnNjcm9sbEJlaGF2aW91cignZW5hYmxlJyk7XG5cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlRWxlbWVudCAmJiB0aGlzLmFjdGl2ZUVsZW1lbnQuZm9jdXMpIHtcbiAgICAgICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29uZmlnLm9uQ2xvc2UodGhpcy5tb2RhbCwgdGhpcy5hY3RpdmVFbGVtZW50LCBldmVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF3YWl0Q2xvc2VBbmltYXRpb24pIHtcbiAgICAgICAgICB2YXIgb3BlbkNsYXNzID0gdGhpcy5jb25maWcub3BlbkNsYXNzOyAvLyA8LSBvbGQgc2Nob29sIGZ0d1xuXG4gICAgICAgICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShvcGVuQ2xhc3MpO1xuICAgICAgICAgICAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgaGFuZGxlciwgZmFsc2UpO1xuICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY29uZmlnLm9wZW5DbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VNb2RhbEJ5SWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZU1vZGFsQnlJZCh0YXJnZXRNb2RhbCkge1xuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0TW9kYWwpO1xuICAgICAgICBpZiAodGhpcy5tb2RhbCkgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInNjcm9sbEJlaGF2aW91clwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbEJlaGF2aW91cih0b2dnbGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5kaXNhYmxlU2Nyb2xsKSByZXR1cm47XG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gICAgICAgIHN3aXRjaCAodG9nZ2xlKSB7XG4gICAgICAgICAgY2FzZSAnZW5hYmxlJzpcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYm9keS5zdHlsZSwge1xuICAgICAgICAgICAgICBvdmVyZmxvdzogJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdkaXNhYmxlJzpcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYm9keS5zdHlsZSwge1xuICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiYWRkRXZlbnRMaXN0ZW5lcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vbkNsaWNrKTtcbiAgICAgICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljayk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5ZG93bik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbW92ZUV2ZW50TGlzdGVuZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25DbGljayk7XG4gICAgICAgIHRoaXMubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleWRvd24pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvbkNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lmhhc0F0dHJpYnV0ZSh0aGlzLmNvbmZpZy5jbG9zZVRyaWdnZXIpKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvbktleWRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleWRvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDI3KSB0aGlzLmNsb3NlTW9kYWwoZXZlbnQpOyAvLyBlc2NcblxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gOSkgdGhpcy5yZXRhaW5Gb2N1cyhldmVudCk7IC8vIHRhYlxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRGb2N1c2FibGVOb2Rlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZvY3VzYWJsZU5vZGVzKCkge1xuICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoRk9DVVNBQkxFX0VMRU1FTlRTKTtcbiAgICAgICAgcmV0dXJuIEFycmF5LmFwcGx5KHZvaWQgMCwgX3RvQ29uc3VtYWJsZUFycmF5KG5vZGVzKSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFRyaWVzIHRvIHNldCBmb2N1cyBvbiBhIG5vZGUgd2hpY2ggaXMgbm90IGEgY2xvc2UgdHJpZ2dlclxuICAgICAgICogaWYgbm8gb3RoZXIgbm9kZXMgZXhpc3QgdGhlbiBmb2N1c2VzIG9uIGZpcnN0IGNsb3NlIHRyaWdnZXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInNldEZvY3VzVG9GaXJzdE5vZGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRGb2N1c1RvRmlyc3ROb2RlKCkge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICBpZiAodGhpcy5jb25maWcuZGlzYWJsZUZvY3VzKSByZXR1cm47XG4gICAgICAgIHZhciBmb2N1c2FibGVOb2RlcyA9IHRoaXMuZ2V0Rm9jdXNhYmxlTm9kZXMoKTsgLy8gbm8gZm9jdXNhYmxlIG5vZGVzXG5cbiAgICAgICAgaWYgKGZvY3VzYWJsZU5vZGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOyAvLyByZW1vdmUgbm9kZXMgb24gd2hvc2UgY2xpY2ssIHRoZSBtb2RhbCBjbG9zZXNcbiAgICAgICAgLy8gY291bGQgbm90IHRoaW5rIG9mIGEgYmV0dGVyIG5hbWUgOihcblxuICAgICAgICB2YXIgbm9kZXNXaGljaEFyZU5vdENsb3NlVGFyZ2V0cyA9IGZvY3VzYWJsZU5vZGVzLmZpbHRlcihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIHJldHVybiAhbm9kZS5oYXNBdHRyaWJ1dGUoX3RoaXMzLmNvbmZpZy5jbG9zZVRyaWdnZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG5vZGVzV2hpY2hBcmVOb3RDbG9zZVRhcmdldHMubGVuZ3RoID4gMCkgbm9kZXNXaGljaEFyZU5vdENsb3NlVGFyZ2V0c1swXS5mb2N1cygpO1xuICAgICAgICBpZiAobm9kZXNXaGljaEFyZU5vdENsb3NlVGFyZ2V0cy5sZW5ndGggPT09IDApIGZvY3VzYWJsZU5vZGVzWzBdLmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJldGFpbkZvY3VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmV0YWluRm9jdXMoZXZlbnQpIHtcbiAgICAgICAgdmFyIGZvY3VzYWJsZU5vZGVzID0gdGhpcy5nZXRGb2N1c2FibGVOb2RlcygpOyAvLyBubyBmb2N1c2FibGUgbm9kZXNcblxuICAgICAgICBpZiAoZm9jdXNhYmxlTm9kZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaWx0ZXJzIG5vZGVzIHdoaWNoIGFyZSBoaWRkZW4gdG8gcHJldmVudFxuICAgICAgICAgKiBmb2N1cyBsZWFrIG91dHNpZGUgbW9kYWxcbiAgICAgICAgICovXG5cbiAgICAgICAgZm9jdXNhYmxlTm9kZXMgPSBmb2N1c2FibGVOb2Rlcy5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZS5vZmZzZXRQYXJlbnQgIT09IG51bGw7XG4gICAgICAgIH0pOyAvLyBpZiBkaXNhYmxlRm9jdXMgaXMgdHJ1ZVxuXG4gICAgICAgIGlmICghdGhpcy5tb2RhbC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgIGZvY3VzYWJsZU5vZGVzWzBdLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGZvY3VzZWRJdGVtSW5kZXggPSBmb2N1c2FibGVOb2Rlcy5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIGZvY3VzZWRJdGVtSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIGZvY3VzYWJsZU5vZGVzW2ZvY3VzYWJsZU5vZGVzLmxlbmd0aCAtIDFdLmZvY3VzKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkgJiYgZm9jdXNhYmxlTm9kZXMubGVuZ3RoID4gMCAmJiBmb2N1c2VkSXRlbUluZGV4ID09PSBmb2N1c2FibGVOb2Rlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBmb2N1c2FibGVOb2Rlc1swXS5mb2N1cygpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTW9kYWw7XG4gIH0oKTtcbiAgLyoqXG4gICAqIE1vZGFsIHByb3RvdHlwZSBlbmRzLlxuICAgKiBIZXJlIG9uIGNvZGUgaXMgcmVzcG9uc2libGUgZm9yIGRldGVjdGluZyBhbmRcbiAgICogYXV0byBiaW5kaW5nIGV2ZW50IGhhbmRsZXJzIG9uIG1vZGFsIHRyaWdnZXJzXG4gICAqL1xuICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvcGVuZWQgbW9kYWxcblxuXG4gIHZhciBhY3RpdmVNb2RhbCA9IG51bGw7XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgbW9kYWxzIGFuZCBpdCdzXG4gICAqIHJlc3BlY3RpdmUgdHJpZ2dlcnNcbiAgICogQHBhcmFtICB7YXJyYXl9IHRyaWdnZXJzICAgICBBbiBhcnJheSBvZiBhbGwgdHJpZ2dlcnNcbiAgICogQHBhcmFtICB7c3RyaW5nfSB0cmlnZ2VyQXR0ciBUaGUgZGF0YS1hdHRyaWJ1dGUgd2hpY2ggdHJpZ2dlcnMgdGhlIG1vZHVsZVxuICAgKiBAcmV0dXJuIHthcnJheX1cbiAgICovXG5cbiAgdmFyIGdlbmVyYXRlVHJpZ2dlck1hcCA9IGZ1bmN0aW9uIGdlbmVyYXRlVHJpZ2dlck1hcCh0cmlnZ2VycywgdHJpZ2dlckF0dHIpIHtcbiAgICB2YXIgdHJpZ2dlck1hcCA9IFtdO1xuICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24gKHRyaWdnZXIpIHtcbiAgICAgIHZhciB0YXJnZXRNb2RhbCA9IHRyaWdnZXIuYXR0cmlidXRlc1t0cmlnZ2VyQXR0cl0udmFsdWU7XG4gICAgICBpZiAodHJpZ2dlck1hcFt0YXJnZXRNb2RhbF0gPT09IHVuZGVmaW5lZCkgdHJpZ2dlck1hcFt0YXJnZXRNb2RhbF0gPSBbXTtcbiAgICAgIHRyaWdnZXJNYXBbdGFyZ2V0TW9kYWxdLnB1c2godHJpZ2dlcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRyaWdnZXJNYXA7XG4gIH07XG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgd2hldGhlciBhIG1vZGFsIG9mIHRoZSBnaXZlbiBpZCBleGlzdHNcbiAgICogaW4gdGhlIERPTVxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IGlkICBUaGUgaWQgb2YgdGhlIG1vZGFsXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuXG5cbiAgdmFyIHZhbGlkYXRlTW9kYWxQcmVzZW5jZSA9IGZ1bmN0aW9uIHZhbGlkYXRlTW9kYWxQcmVzZW5jZShpZCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJNaWNyb01vZGFsOiBcXHUyNzU3U2VlbXMgbGlrZSB5b3UgaGF2ZSBtaXNzZWQgJWMnXCIuY29uY2F0KGlkLCBcIidcIiksICdiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO2NvbG9yOiAjNTA1OTZjO2ZvbnQtd2VpZ2h0OiBib2xkOycsICdJRCBzb21ld2hlcmUgaW4geW91ciBjb2RlLiBSZWZlciBleGFtcGxlIGJlbG93IHRvIHJlc29sdmUgaXQuJyk7XG4gICAgICBjb25zb2xlLndhcm4oXCIlY0V4YW1wbGU6XCIsICdiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO2NvbG9yOiAjNTA1OTZjO2ZvbnQtd2VpZ2h0OiBib2xkOycsIFwiPGRpdiBjbGFzcz1cXFwibW9kYWxcXFwiIGlkPVxcXCJcIi5jb25jYXQoaWQsIFwiXFxcIj48L2Rpdj5cIikpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFZhbGlkYXRlcyBpZiB0aGVyZSBhcmUgbW9kYWwgdHJpZ2dlcnMgcHJlc2VudFxuICAgKiBpbiB0aGUgRE9NXG4gICAqIEBwYXJhbSAge2FycmF5fSB0cmlnZ2VycyBBbiBhcnJheSBvZiBkYXRhLXRyaWdnZXJzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuXG5cbiAgdmFyIHZhbGlkYXRlVHJpZ2dlclByZXNlbmNlID0gZnVuY3Rpb24gdmFsaWRhdGVUcmlnZ2VyUHJlc2VuY2UodHJpZ2dlcnMpIHtcbiAgICBpZiAodHJpZ2dlcnMubGVuZ3RoIDw9IDApIHtcbiAgICAgIGNvbnNvbGUud2FybihcIk1pY3JvTW9kYWw6IFxcdTI3NTdQbGVhc2Ugc3BlY2lmeSBhdCBsZWFzdCBvbmUgJWMnbWljcm9tb2RhbC10cmlnZ2VyJ1wiLCAnYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTtjb2xvcjogIzUwNTk2Yztmb250LXdlaWdodDogYm9sZDsnLCAnZGF0YSBhdHRyaWJ1dGUuJyk7XG4gICAgICBjb25zb2xlLndhcm4oXCIlY0V4YW1wbGU6XCIsICdiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO2NvbG9yOiAjNTA1OTZjO2ZvbnQtd2VpZ2h0OiBib2xkOycsIFwiPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1taWNyb21vZGFsLXRyaWdnZXI9XFxcIm15LW1vZGFsXFxcIj48L2E+XCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0cmlnZ2VycyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBtb2RhbHNcbiAgICogYXJlIHByZXNlbnQgaW4gdGhlIERPTVxuICAgKiBAcGFyYW0gIHthcnJheX0gdHJpZ2dlcnMgICBBcnJheSBvZiBET00gbm9kZXMgd2hpY2ggaGF2ZSBkYXRhLXRyaWdnZXJzXG4gICAqIEBwYXJhbSAge2FycmF5fSB0cmlnZ2VyTWFwIEFzc29jaWF0aXZlIGFycmF5IG9mIG1vZGFscyBhbmQgdGhlaXIgdHJpZ2dlcnNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG5cblxuICB2YXIgdmFsaWRhdGVBcmdzID0gZnVuY3Rpb24gdmFsaWRhdGVBcmdzKHRyaWdnZXJzLCB0cmlnZ2VyTWFwKSB7XG4gICAgdmFsaWRhdGVUcmlnZ2VyUHJlc2VuY2UodHJpZ2dlcnMpO1xuICAgIGlmICghdHJpZ2dlck1hcCkgcmV0dXJuIHRydWU7XG5cbiAgICBmb3IgKHZhciBpZCBpbiB0cmlnZ2VyTWFwKSB7XG4gICAgICB2YWxpZGF0ZU1vZGFsUHJlc2VuY2UoaWQpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICAvKipcbiAgICogQmluZHMgY2xpY2sgaGFuZGxlcnMgdG8gYWxsIG1vZGFsIHRyaWdnZXJzXG4gICAqIEBwYXJhbSAge29iamVjdH0gY29uZmlnIFtkZXNjcmlwdGlvbl1cbiAgICogQHJldHVybiB2b2lkXG4gICAqL1xuXG5cbiAgdmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KGNvbmZpZykge1xuICAgIC8vIENyZWF0ZSBhbiBjb25maWcgb2JqZWN0IHdpdGggZGVmYXVsdCBvcGVuVHJpZ2dlclxuICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgb3BlblRyaWdnZXI6ICdkYXRhLW1pY3JvbW9kYWwtdHJpZ2dlcidcbiAgICB9LCBjb25maWcpOyAvLyBDb2xsZWN0cyBhbGwgdGhlIG5vZGVzIHdpdGggdGhlIHRyaWdnZXJcblxuICAgIHZhciB0cmlnZ2VycyA9IF90b0NvbnN1bWFibGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiLmNvbmNhdChvcHRpb25zLm9wZW5UcmlnZ2VyLCBcIl1cIikpKTsgLy8gTWFrZXMgYSBtYXBwaW5ncyBvZiBtb2RhbHMgd2l0aCB0aGVpciB0cmlnZ2VyIG5vZGVzXG5cblxuICAgIHZhciB0cmlnZ2VyTWFwID0gZ2VuZXJhdGVUcmlnZ2VyTWFwKHRyaWdnZXJzLCBvcHRpb25zLm9wZW5UcmlnZ2VyKTsgLy8gQ2hlY2tzIGlmIG1vZGFscyBhbmQgdHJpZ2dlcnMgZXhpc3QgaW4gZG9tXG5cbiAgICBpZiAob3B0aW9ucy5kZWJ1Z01vZGUgPT09IHRydWUgJiYgdmFsaWRhdGVBcmdzKHRyaWdnZXJzLCB0cmlnZ2VyTWFwKSA9PT0gZmFsc2UpIHJldHVybjsgLy8gRm9yIGV2ZXJ5IHRhcmdldCBtb2RhbCBjcmVhdGVzIGEgbmV3IGluc3RhbmNlXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gdHJpZ2dlck1hcCkge1xuICAgICAgdmFyIHZhbHVlID0gdHJpZ2dlck1hcFtrZXldO1xuICAgICAgb3B0aW9ucy50YXJnZXRNb2RhbCA9IGtleTtcbiAgICAgIG9wdGlvbnMudHJpZ2dlcnMgPSBfdG9Db25zdW1hYmxlQXJyYXkodmFsdWUpO1xuICAgICAgYWN0aXZlTW9kYWwgPSBuZXcgTW9kYWwob3B0aW9ucyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogU2hvd3MgYSBwYXJ0aWN1bGFyIG1vZGFsXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdGFyZ2V0TW9kYWwgW1RoZSBpZCBvZiB0aGUgbW9kYWwgdG8gZGlzcGxheV1cbiAgICogQHBhcmFtICB7b2JqZWN0fSBjb25maWcgW1RoZSBjb25maWd1cmF0aW9uIG9iamVjdCB0byBwYXNzXVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cblxuXG4gIHZhciBzaG93ID0gZnVuY3Rpb24gc2hvdyh0YXJnZXRNb2RhbCwgY29uZmlnKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBjb25maWcgfHwge307XG4gICAgb3B0aW9ucy50YXJnZXRNb2RhbCA9IHRhcmdldE1vZGFsOyAvLyBDaGVja3MgaWYgbW9kYWxzIGFuZCB0cmlnZ2VycyBleGlzdCBpbiBkb21cblxuICAgIGlmIChvcHRpb25zLmRlYnVnTW9kZSA9PT0gdHJ1ZSAmJiB2YWxpZGF0ZU1vZGFsUHJlc2VuY2UodGFyZ2V0TW9kYWwpID09PSBmYWxzZSkgcmV0dXJuOyAvLyBjbGVhciBldmVudHMgaW4gY2FzZSBwcmV2aW91cyBtb2RhbCB3YXNuJ3QgY2xvc2VcblxuICAgIGlmIChhY3RpdmVNb2RhbCkgYWN0aXZlTW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTsgLy8gc3RvcmVzIHJlZmVyZW5jZSB0byBhY3RpdmUgbW9kYWxcblxuICAgIGFjdGl2ZU1vZGFsID0gbmV3IE1vZGFsKG9wdGlvbnMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuXG4gICAgYWN0aXZlTW9kYWwuc2hvd01vZGFsKCk7XG4gIH07XG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGFjdGl2ZSBtb2RhbFxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHRhcmdldE1vZGFsIFtUaGUgaWQgb2YgdGhlIG1vZGFsIHRvIGNsb3NlXVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cblxuXG4gIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKHRhcmdldE1vZGFsKSB7XG4gICAgdGFyZ2V0TW9kYWwgPyBhY3RpdmVNb2RhbC5jbG9zZU1vZGFsQnlJZCh0YXJnZXRNb2RhbCkgOiBhY3RpdmVNb2RhbC5jbG9zZU1vZGFsKCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0LFxuICAgIHNob3c6IHNob3csXG4gICAgY2xvc2U6IGNsb3NlXG4gIH07XG59KCk7XG53aW5kb3cuTWljcm9Nb2RhbCA9IE1pY3JvTW9kYWw7XG5cbmV4cG9ydCBkZWZhdWx0IE1pY3JvTW9kYWw7XG4iLCJjbGFzcyBQcm9qZWN0IHtcbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLnRvZG9MaXN0ID0gW107XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdDsiLCJjbGFzcyBUb2RvIHtcbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSA9IDAsIGNvbXBsZXRlID0gZmFsc2UpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMuY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICAvLyBBZGQgbm90ZXMgYW5kIGNoZWNrbGlzdCBsYXRlclxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvZG87IiwiaW1wb3J0IE1pY3JvTW9kYWwgZnJvbSAnbWljcm9tb2RhbCc7XG5pbXBvcnQgc3RvcmUgZnJvbSAnc3RvcmUyJztcbmltcG9ydCBQcm9qZWN0IGZyb20gJy4vcHJvamVjdHMnO1xuaW1wb3J0IFRvZG8gZnJvbSAnLi90b2Rvcyc7XG5cbmNvbnN0IERpc3BsYXkgPSAoKCkgPT4ge1xuICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzJyk7XG4gIGNvbnN0IG1vZGFsQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY29udGVudCcpO1xuICBjb25zdCBtb2RhbFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX190aXRsZScpO1xuICBjb25zdCBkZWZhdWx0UHJvamVjdCA9IG5ldyBQcm9qZWN0KCdkZWZhdWx0JywgJ1RoaXMgaXMgdGhlIGRlZmF1bHQgdG9EbyBsaXN0Jyk7XG4gIGxldCBwcm9qZWN0TGlzdCA9IFtkZWZhdWx0UHJvamVjdF07XG5cbiAgbGV0IGZpcnN0UmVuZGVyID0gdHJ1ZTtcblxuICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19idG4nKS5jbGljaygpO1xuXG4gIGNvbnN0IGNsZWFuUGFnZSA9IChlbGVtZW50KSA9PiB7XG4gICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50Lmxhc3RDaGlsZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNldE5vdGljZSA9ICh0ZXh0KSA9PiB7XG4gICAgY29uc3QgcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbm90aWNlJyk7XG4gICAgcC50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH07XG5cbiAgY29uc3QgY2hlY2tJbnB1dHMgPSAoYXJyKSA9PiB7XG4gICAgbGV0IGlucHV0c1Bhc3MgPSB0cnVlO1xuICAgIGFyci5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlmIChpbnB1dC5sZW5ndGggPCAxKSB7IGlucHV0c1Bhc3MgPSBmYWxzZTsgfVxuICAgIH0pO1xuICAgIGlmIChpbnB1dHNQYXNzID09PSBmYWxzZSkge1xuICAgICAgc2V0Tm90aWNlKCdBbGwgZmllbGRzIFJlcXVpcmVkJyk7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dHNQYXNzO1xuICB9O1xuXG4gIGNvbnN0IGVkaXRUb2RvID0gKHByb2plY3QsIHRvZG8pID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICBjcmVhdGVUb2RvRm9ybSh0cnVlLCB0b2RvLCBwcm9qZWN0KTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVUb2RvID0gKHByb2plY3QsIHRvZG8pID0+IHtcbiAgICBwcm9qZWN0LnRvZG9MaXN0ID0gcHJvamVjdC50b2RvTGlzdC5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSAhPT0gdG9kbyk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgcmVuZGVyUHJvamVjdHMoKTtcbiAgICBjbG9zZU1vZGFsKCk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyVG9kbyA9ICh0b2RvLCBwcm9qZWN0KSA9PiB7XG4gICAgY2xlYW5QYWdlKG1vZGFsQ29udGVudCk7XG4gICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7XG4gICAgT2JqZWN0LmVudHJpZXModG9kbykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gYCR7aXRlbVswXX06ICR7aXRlbVsxXX1gO1xuICAgICAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGRlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBkZWxCdG4udGV4dENvbnRlbnQgPSAnUmVtb3ZlIFRvZG8nO1xuICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChkZWxCdG4pO1xuICAgIGRlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHJlbW92ZVRvZG8ocHJvamVjdCwgdG9kbykpO1xuICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSAnRWRpdCBUb2RvJztcbiAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQoZWRpdEJ0bik7XG4gICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGVkaXRUb2RvKHByb2plY3QsIHRvZG8pKTtcbiAgfTtcblxuICBjb25zdCB0b2dnbGVEb25lID0gKHRvZG8pID0+IHtcbiAgICB0b2RvLmNvbXBsZXRlID0gIXRvZG8uY29tcGxldGU7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgcmVuZGVyUHJvamVjdHMoKTtcbiAgfTtcbiAgY29uc3QgZ2V0VG9kb0xpc3QgPSAocHJvamVjdCkgPT4ge1xuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBwcm9qZWN0LnRvZG9MaXN0LmZvckVhY2godG9kbyA9PiB7XG4gICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBjb25zdCBjb21wbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgY29tcGxldGVCdG4udGV4dENvbnRlbnQgPSBgJHt0b2RvLmNvbXBsZXRlID8gJ0RvbmUnIDogJ05vdCBEb25lJ31gO1xuICAgICAgbGkuaW5uZXJIVE1MID0gYDxzdHJvbmc+JHt0b2RvLnRpdGxlfTwvc3Ryb25nPiAtIER1ZTogJHt0b2RvLmR1ZURhdGV9YDtcbiAgICAgIHVsLmFwcGVuZENoaWxkKGNvbXBsZXRlQnRuKTtcbiAgICAgIGNvbXBsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdG9nZ2xlRG9uZSh0b2RvKSk7XG4gICAgICBsaS5jbGFzc0xpc3QuYWRkKCd0b2RvLWxpc3QtaXRlbXMnKTtcbiAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVuZGVyVG9kbyh0b2RvLCBwcm9qZWN0KSk7XG4gICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWljcm9tb2RhbC10cmlnZ2VyJywgJ21vZGFsLTEnKTtcbiAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdWw7XG4gIH07XG4gIGNvbnN0IHJlbmRlclByb2plY3RzID0gKCkgPT4ge1xuICAgIGNsZWFuUGFnZShwcm9qZWN0RGl2KTtcbiAgICBpZiAoc3RvcmUoJ3Byb2plY3RzJykgJiYgZmlyc3RSZW5kZXIpIHtcbiAgICAgIHByb2plY3RMaXN0ID0gc3RvcmUoJ3Byb2plY3RzJyk7XG4gICAgICBmaXJzdFJlbmRlciA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdG9yZSgncHJvamVjdHMnLCBwcm9qZWN0TGlzdCk7XG4gICAgfVxuXG4gICAgcHJvamVjdExpc3QuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgIGNvbnN0IGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgIGNvbnN0IGhyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICAgIGgyLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZTtcbiAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQoaDIpO1xuICAgICAgY29uc3QgdWwgPSBnZXRUb2RvTGlzdChwcm9qZWN0KTtcbiAgICAgIHByb2plY3REaXYuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgcHJvamVjdERpdi5hcHBlbmRDaGlsZChocik7XG4gICAgICBNaWNyb01vZGFsLmluaXQoKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXRpdGxlJykudmFsdWU7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1kZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgIGlmICghY2hlY2tJbnB1dHMoW3RpdGxlLCBkZXNjcmlwdGlvbl0pKSB7IHJldHVybjsgfVxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdCh0aXRsZSwgZGVzY3JpcHRpb24pO1xuICAgIHByb2plY3RMaXN0LnB1c2gobmV3UHJvamVjdCk7XG4gICAgcmVuZGVyUHJvamVjdHMoKTtcbiAgICBjbG9zZU1vZGFsKCk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdEZvcm0gPSAoKSA9PiB7XG4gICAgc2V0Tm90aWNlKCcnKTtcbiAgICBjbGVhblBhZ2UobW9kYWxDb250ZW50KTtcbiAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gJ0FkZCBQcm9qZWN0JztcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIGNvbnN0IGlucHV0cyA9IFsndGl0bGUnLCAnZGVzY3JpcHRpb24nXTtcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBjb25zdCBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7XG4gICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGlucHV0O1xuICAgICAgZm9ybS5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICBmb3JtLmFwcGVuZENoaWxkKGJyKTtcbiAgICAgIGNvbnN0IGlucHV0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICBpbnB1dEFyZWEudGV4dENvbnRlbnQgPSBpbnB1dDtcbiAgICAgIGlucHV0QXJlYS5jbGFzc0xpc3QuYWRkKGBwcm9qZWN0LSR7aW5wdXR9YCk7XG4gICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0QXJlYSk7XG4gICAgICBmb3JtLmFwcGVuZENoaWxkKGJyKTtcbiAgICB9KTtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSAnQ3JlYXRlIFByb2plY3QnO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjcmVhdGVQcm9qZWN0KTtcbiAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlVG9kbyA9IChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1wcm9qZWN0JykudmFsdWU7XG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0udGl0bGUgPT09IHByb2plY3ROYW1lKTtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLXRpdGxlJykudmFsdWU7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1kZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1kdWVEYXRlJykudmFsdWU7XG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicHJpb3JpdHlcIl06Y2hlY2tlZCcpLnRleHRDb250ZW50O1xuICAgIGlmICghY2hlY2tJbnB1dHMoW3RpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHldKSkgeyByZXR1cm47IH1cbiAgICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSk7XG4gICAgcHJvamVjdFswXS50b2RvTGlzdC5wdXNoKG5ld1RvZG8pO1xuICAgIHJlbmRlclByb2plY3RzKCk7XG4gICAgY2xvc2VNb2RhbCgpO1xuICB9O1xuICBjb25zdCBjcmVhdGVUb2RvRm9ybSA9IChlZGl0ZWQsIHRvZG8sIHByb2plY3QpID0+IHtcbiAgICBzZXROb3RpY2UoJycpO1xuICAgIGNsZWFuUGFnZShtb2RhbENvbnRlbnQpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgY29uc3QgaW5wdXRzID0gW1snVGl0bGUnLCAndGV4dCcsICd0aXRsZSddLCBbJ0Rlc2NyaXB0aW9uJywgJ3RleHQnLCAnZGVzY3JpcHRpb24nXSwgWydEdWVEYXRlJywgJ2RhdGUnLCAnZHVlRGF0ZSddLCBbJ0xvdycsICdyYWRpbycsICdwcmlvcml0eSddLCBbJ01lZGl1bScsICdyYWRpbycsICdwcmlvcml0eSddLCBbJ0hpZ2gnLCAncmFkaW8nLCAncHJpb3JpdHknXV07XG4gICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ3RvZG8tcHJvamVjdCcpO1xuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKTtcbiAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBpbnB1dFswXTtcbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgZm9ybS5hcHBlbmRDaGlsZChicik7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgIFtlbGVtZW50LnRleHRDb250ZW50LCBlbGVtZW50LnR5cGUsIGVsZW1lbnQubmFtZV0gPSBpbnB1dDtcbiAgICAgIGlmIChlZGl0ZWQpIHtcbiAgICAgICAgZWxlbWVudC52YWx1ZSA9IHRvZG9baW5wdXRbMl1dO1xuICAgICAgfVxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGB0b2RvLSR7aW5wdXRbMl19YCk7XG4gICAgICBmb3JtLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgZm9ybS5hcHBlbmRDaGlsZChicik7XG4gICAgfSk7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZTtcbiAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgIH0pO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc2VsZWN0KTtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBpZiAoIWVkaXRlZCkge1xuICAgICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9ICdBZGQgVG9kbyc7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnQ3JlYXRlIFRvZG8nO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gJ0VkaXQgVG9kbyc7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnRmluaXNoZWQgRWRpdCc7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZW1vdmVUb2RvKHByb2plY3QsIHRvZG8pKTtcbiAgICB9XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVG9kbyk7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChmb3JtKTtcbiAgfTtcblxuICByZXR1cm4geyByZW5kZXJQcm9qZWN0cywgY3JlYXRlUHJvamVjdEZvcm0sIGNyZWF0ZVRvZG9Gb3JtIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBEaXNwbGF5OyIsImltcG9ydCBEaXNwbGF5IGZyb20gJy4vZG9tJztcblxuaW1wb3J0ICcuL21vZGFsLnNjc3MnO1xuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLXRvZG8tYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBEaXNwbGF5LmNyZWF0ZVRvZG9Gb3JtKGZhbHNlLCB7fSwge30pKTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtcHJvamVjdC1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIERpc3BsYXkuY3JlYXRlUHJvamVjdEZvcm0pO1xuXG5EaXNwbGF5LnJlbmRlclByb2plY3RzKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==